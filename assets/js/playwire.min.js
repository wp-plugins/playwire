/*! Playwire - v0.1.0
 * http://wordpress.org/plugins
 * Copyright (c) 2014; * Licensed GPLv2+ */
(function(e,t){"use strict";function a(t,a,i){var n=t*i,s=n+i;e(document.getElementsByClassName(a)).children("a").css("display","none").slice(n,s).css("display","inline-block"),e(document.getElementsByClassName(a)).find(".page[longdesc="+t+"]").addClass("active").siblings(".active").removeClass("active"),e(document.getElementsByClassName(a)).find(".current_page").val(t)}if("different"===PlaywireObject.compare_json){var i="single-video-posts-edit-dialog-different",n=e(document.getElementById(i));n.dialog({dialogClass:"wp-dialog",modal:!1,autoOpen:!1,closeOnEscape:!0,buttons:{Ignore:function(){e(this).dialog("close")},Update:function(){var a=t.confirm("Warning! This will overwrite the current post what whatever new data it recieves.");if(a!==!0)return!1;var i=e(document.getElementById("single-video-posts-edit-dialog-different-data-element")),s=i.data("nonce"),l=i.data("id"),r=e.ajax({dataType:"json",type:"post",url:PlaywireObject.ajaxurl,data:{action:"ajax_update_post",nonce:s,id:l}});r.done(function(e){e===!0&&(n.dialog("close"),location.reload())})},"Go Back":function(){return t.location.href=PlaywireObject.adminurl,!1}}})}if("removed"===PlaywireObject.compare_json){var s="single-video-posts-edit-dialog-removed",l=e(document.getElementById(s)),r=e(document.getElementById("single-video-posts-edit-dialog-removed-data-element"));l.dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!0,closeOnEscape:!0,buttons:{Ignore:function(){var t=e(r),a=t.data("nonce"),i=t.data("id"),n=e.ajax({dataType:"json",type:"post",url:PlaywireObject.ajaxurl,data:{action:"ajax_delete_post_meta",nonce:a,id:i}});n.done(function(e){e===!0&&location.reload()})},Delete:function(){var a=t.confirm("Warning! This will delete the current post and any data associated with it in WordPress.");if(a!==!0)return!1;var i=e(document.getElementById("single-video-posts-edit-dialog-removed-data-element")),n=i.data("nonce"),s=i.data("id"),l=e.ajax({dataType:"json",type:"post",url:PlaywireObject.ajaxurl,data:{action:"ajax_delete_post",nonce:n,id:s}});l.done(function(e){e===!0&&(location.reload(),t.location.href=PlaywireObject.adminurl)})},"Go Back":function(){return t.location.href=PlaywireObject.adminurl,!1}}})}var o=document.getElementById("the-list");if(o&&o.addEventListener("click",function(t){if(t.target&&"editinline"===t.target.getAttribute("class")){inlineEditPost.revert();var a=inlineEditPost.getId(t.target),i=e(document.getElementById(String("inline_"+a)));e(document.getElementsByClassName("post_category"),i).each(function(){var t,i=e(this).text();i=""!==i.trim()?i.trim():"0";var n=i.split(",");n=n?n[0]:"0",t=e(this).attr("id").replace(String("_"+a),""),e(document.getElementById(String(t+"-"+n))).first().find("input:radio").prop("checked",!0)})}}),t.self!==t.top){var d=document.getElementsByClassName("playlist");e(d).click(function(){var a=e(this).data("playlist-post-id"),i=t.dialogArguments||t.opener||t.parent||t.top;i.send_to_editor(String("[playwire_playlist playlist_post_id="+a+"]"))})}if(t.self!==t.top){var c=document.getElementsByClassName("video");e(c).click(function(){var a=e(this).data("video-post-id"),i=t.dialogArguments||t.opener||t.parent||t.top;i.send_to_editor(String("[playwire_video video_post_id="+a+"]"))})}e(document.getElementById(playwire_object.search_input)).fastLiveFilter(document.getElementById(playwire_object.search_list)),1===parseInt(playwire_object.is_edit_screen,10)&&e("#wpbody-content h2").append(e("<a/>",{"class":"add-new-h2",href:playwire_object.edit_screen_url,text:playwire_object.edit_screen_text}));{var p="#playwire_aspect_ratio_select",g="#playlist_preview_meta_box";document.getElementById("playwire_gallery_pagination_options"),document.getElementById("playwire_single_video"),document.getElementById("playwire_video_playlist")}e("#post select, #post input").on("change",function(){var t=e("input[name='playwire_metabox_nonce']").val(),a=e("input[name='playwire_video_layout']:checked").data("template"),i=e("select[name='playwire_video_playlist']").find(":selected").val(),n=e("select[name='playwire_single_video']").find(":selected").data("current-single-video"),s=e("input[name='playwire_aspect_ratio']:checked").val(),l=e(String("select."+s)).find(":selected").val(),r=e(String("select."+s)).find(":selected").data("height"),o=(e(String("select."+s)).find(":selected").data("width"),e("input[name='playwire_gallery_pagination_options']:checked").val()),d={action:"ajax_preview",playwire_metabox_nonce:t,template:a,current_playlist:i,current_single_video:n,current_ratio:s,current_ratio_select:l,current_ratio_height:r,current_gallery_pagination:o};"single"===d.template,"gallery"===d.template,"custom"===d.current_ratio?(e(String(p+" ul")).show(),e(String(p+" select")).hide()):"classic"===d.current_ratio?(e(String(p+" select.classic")).show(),e(String(p+" ul")).hide(),e(String(p+" select.widescreen")).hide()):"widescreen"===d.current_ratio&&(e(String(p+" select.widescreen")).show(),e(String(p+" ul")).hide(),e(String(p+" select.classic")).hide()),e(String(g+" .inside")).fadeOut(),e.post(ajaxurl,d,function(t){e(String(g+" .inside")).fadeIn().html(t)})});var _="[id^=playwire_gallery]",h=playwire_object.gallery_limit;e(_).each(function(t){var a=e(this).attr("id")+"_"+t;e(this).addClass(a);var i=e(this).children("a").size();if(!(h>=i)){var n=Math.ceil(i/h);if(e(this).append(e("<div/>",{"class":"controls"}),e("<input/>",{type:"hidden","class":"current_page"}),e("<input/>",{"class":"show_per_page",type:"hidden"})),e(".current_page").val(0),e(".show_per_page").val(parseInt(h,10)),e(this).attr("id").match("_pagination$")){for(var s='<a class="prev">Prev</a>',l=0;n>l;)s+=String('<a class="page" longdesc="'+l+'">'+(l+1)+"</a>"),l++;s+='<a class="next">Next</a>',e(".controls",this).html(s)}if(e(".controls a.page:first",this).addClass("active"),e(this).attr("id").match("_more$")){var r=String('<a class="more-videos">More Videos</a>');e(".controls",this).html(r)}(e(this).attr("id").match("_pagination$")||e(this).attr("id").match("_more$"))&&(e(this).children("a").css("display","none"),e(this).children("a").slice(0,h).css("display","inline-block"))}}),e(".controls").on("click","a",function(){var t=e(this).attr("longdesc"),i=e(this).parent().parent().attr("class"),n=parseInt(e(this).parent().parent().find(".show_per_page").val(),0),s=e(this).parent().parent().find(".current_page").val();if(e(this).hasClass("next")&&1==e(this).siblings(".active").next(".page").length){var t=parseInt(s,0)+1;a(t,i,n,s)}else if(e(this).hasClass("prev")&&e(this).siblings(".active").prev(".page").attr("longdesc")>=0){var t=parseInt(s,0)-1;a(t,i,n,s)}if(e(this).hasClass("more-videos")){var l=e(this).parent().parent().attr("class"),r=(e(String("."+l)).find("> a:hidden").first(),e(String("."+l+" a")).size()-1),o=e(String("."+l+" a:visible")).size()-1,n=parseInt(o,10)+parseInt(n,10);r>o?e(String("."+l+" a:lt("+n+")")).show():this.style.display="none"}e(this).hasClass("page")&&a(t,i,n,s)}),e("div[id^='playwire_gallery'] a .vertical-video-alignment, .flexslider-control ul.slides li").hover(function(){e(this).children(".playwire_play_icon").show()},function(){e(this).children(".playwire_play_icon").hide()})}(jQuery,this);